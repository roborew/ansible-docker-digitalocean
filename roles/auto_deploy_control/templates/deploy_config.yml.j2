# Auto-Deployment Configuration for Control Node
# Generated by Ansible from group_vars configuration

auto_deploy:
  enabled: {{ auto_deploy.enabled | default(false) }}
  webhook_port: {{ auto_deploy.webhook_port | default(9000) }}
  webhook_secret: {{ auto_deploy.webhook_secret | default('change-me') }}
  webhook_path: {{ auto_deploy.webhook_path | default('/webhook') }}
  deploy_delay: {{ auto_deploy.deploy_delay | default(30) }}
  max_concurrent_deploys: {{ auto_deploy.max_concurrent_deploys | default(2) }}
  notification_email: {{ auto_deploy.notification_email | default('') }}

# Application configurations
apps:
{% for app in apps %}
  - name: {{ app.name }}
    repo: {{ app.repo }}
    auto_deploy:
      enabled: {{ app.auto_deploy.enabled | default(false) }}
{% if app.auto_deploy.enabled | default(false) %}
      branches:
{% for branch in app.auto_deploy.branches %}
        - name: {{ branch.name }}
          hostname: {{ branch.hostname }}
          environment: {{ branch.environment | default('production') }}
{% if branch.deploy_user is defined %}
          deploy_user: {{ branch.deploy_user }}
{% endif %}
{% if branch.deploy_path is defined %}
          deploy_path: {{ branch.deploy_path }}
{% endif %}
{% endfor %}
{% endif %}
{% endfor %}

# Control node settings
control_node:
  ansible_project_dir: {{ ansible_project_dir }}
  ansible_executable: {{ ansible_executable }}
  ansible_inventory: {{ ansible_inventory }}
  ansible_config: {{ ansible_config | default('') }}

# Logging configuration
logging:
  level: INFO
  max_log_size: 10485760  # 10MB
  backup_count: 5 